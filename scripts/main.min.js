var hasLocalStorage=function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}}();function setListeners(){document.querySelector(".login-link").addEventListener("click",loginLinkListener),document.querySelector(".modal-login .modal-close").addEventListener("click",closeLoginButtonListener),document.querySelector('.modal-login button[type="submit"]').addEventListener("click",handleLoginSubmit),document.querySelector(".footer-contacts a").addEventListener("click",mapLinkListener),document.querySelector(".modal-map .modal-close").addEventListener("click",closeModalMapListener),window.addEventListener("keydown",processKeyEvent)}function handleLoginSubmit(e){const o=document.querySelector("#user-login"),t=document.querySelector("#user-password"),n=document.querySelector(".modal-login");if(n.classList.remove("modal-error"),!o.value||!t.value)return e.preventDefault,n.width=n.offsetWidth,n.classList.add("modal-error");hasLocalStorage&&getRememberLoginState()&&setLocalStorageItem("login",o.value)}function getRememberLoginState(){return document.querySelector("#remember-user")&&document.querySelector("#remember-user").checked}function setLocalStorageItem(e,o){localStorage.setItem(e,o)}function getLocalStorageItem(e){return localStorage.getItem(e)}function toggleLoginModal(e){const o=document.querySelector(".modal-login");return e?(openModal(o),setLoginInputFocus(),tryRestoreLogin()):(o.classList.remove("modal-error"),closeModal(o))}function tryRestoreLogin(){const e=document.querySelector("#user-login");let o="";if(o=hasLocalStorage&&getLocalStorageItem("login")){e.value=o,document.querySelector("#user-password").focus()}}function toggleMapModal(e){const o=document.querySelector(".modal-map");return e?(setCloseBtnFocusForModal(o),openModal(o)):closeModal(o)}function setLoginInputFocus(){document.querySelector("#user-login").focus()}function setCloseBtnFocusForModal(e){e.querySelector(".modal-close").focus()}function openModal(e){e.classList.add("modal-show")}function closeModal(e){e.classList.remove("modal-show")}function processKeyEvent(e){let o=!1;(o=!(!e.key||"Escape"!==e.key)||!(!e.keyCode||27!==e.keyCode))&&processEscape(e)}function processEscape(e){const o=document.querySelector(".modal.modal-show");o&&(e.preventDefault(),o.classList.remove("modal-error"),closeModal(o))}function loginLinkListener(e){e.preventDefault(),toggleLoginModal(!0)}function closeLoginButtonListener(){toggleLoginModal(!1)}function mapLinkListener(e){e.preventDefault(),toggleMapModal(!0)}function closeModalMapListener(){toggleMapModal(!1)}setListeners();